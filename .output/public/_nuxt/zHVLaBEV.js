import x from"./BIrU7pFj.js";import{_ as h,A as y,c as l,b as o,a as e,h as d,d as _,t as p,u as v,r as f,o as w,B as b,D as S,F as $,l as k,i as A,j as O,g as C,C as g,K as T}from"./Dy5Da0nO.js";const j=y({name:"AppHeader",emits:["toggle-sidebar"],setup(){const n=v();return{authStore:n,handleLogout:async()=>{await n.logout()}}}}),L={class:"fixed top-0 left-0 right-0 bg-gray-800 z-30 h-16"},B={class:"flex items-center justify-between h-full px-4"},I={class:"flex items-center space-x-4"},N={key:0,class:"text-white"},M={class:"text-sm"},z={key:2,class:"w-8"};function E(n,t,a,i,c,u){const s=x;return o(),l("header",L,[e("div",B,[e("button",{class:"p-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",onClick:t[0]||(t[0]=r=>n.$emit("toggle-sidebar"))},[d(s,{name:"material-symbols:menu-rounded",class:"h-6 w-6 text-white"})]),t[2]||(t[2]=e("div",{class:"flex-1 text-center"},[e("h1",{class:"text-xl font-semibold text-white"},"Fish Monitor")],-1)),e("div",I,[n.authStore.isAuthenticated&&n.authStore.user?(o(),l("div",N,[e("span",M,"Hola, "+p(n.authStore.user.name),1)])):_("",!0),n.authStore.isAuthenticated?(o(),l("button",{key:1,class:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm rounded-md shadow-sm font-medium transition duration-150 ease-in-out",onClick:t[1]||(t[1]=(...r)=>n.handleLogout&&n.handleLogout(...r))}," Salir ")):(o(),l("div",z))])])])}const F=h(j,[["render",E]]),H={key:0,class:"bg-gray-700 text-white p-4"},D={class:"container mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-center"},P={class:"bg-blue-600 p-4 rounded-lg shadow-md flex flex-col items-center justify-center min-h-[100px]"},G={class:"text-2xl font-bold"},K={class:"bg-green-600 p-4 rounded-lg shadow-md flex flex-col items-center justify-center min-h-[100px]"},V={class:"text-2xl font-bold"},q={class:"bg-yellow-500 p-4 rounded-lg shadow-md flex flex-col items-center justify-center min-h-[100px]"},R={class:"text-2xl font-bold"},J={class:"bg-purple-600 p-4 rounded-lg shadow-md flex flex-col items-center justify-center min-h-[100px]"},Q={class:"text-2xl font-bold"},U={key:1,class:"bg-gray-800 text-white p-4 text-center"},W={key:2,class:"bg-red-700 text-white p-4 text-center"},X={__name:"GlobalStatsHeader",setup(n){const t=f(null),a=f(!0),i=f("");async function c(){var u;a.value=!0,i.value="";try{const s=await $fetch("/api/get/tank");if(s.success&&s.summary)t.value=s.summary;else throw new Error("Respuesta de API inválida o resumen no encontrado.")}catch(s){console.error("Error fetching global stats:",s),i.value=((u=s.data)==null?void 0:u.message)||s.message||"Error desconocido.",t.value=null}finally{a.value=!1}}return w(()=>{c()}),(u,s)=>{const r=x;return t.value&&!a.value&&!i.value?(o(),l("div",H,[e("div",D,[e("div",P,[d(r,{name:"mdi:fishbowl-outline",class:"text-3xl mb-2"}),s[0]||(s[0]=e("p",{class:"text-sm font-medium"},"Total Estanques",-1)),e("p",G,p(t.value.totalTanks!==null?t.value.totalTanks:"N/A"),1)]),e("div",K,[d(r,{name:"mdi:fish",class:"text-3xl mb-2"}),s[1]||(s[1]=e("p",{class:"text-sm font-medium"},"Total Peces",-1)),e("p",V,p(t.value.totalFish!==null?t.value.totalFish:"N/A"),1)]),e("div",q,[d(r,{name:"mdi:thermometer",class:"text-3xl mb-2"}),s[2]||(s[2]=e("p",{class:"text-sm font-medium"},"Temp. Promedio",-1)),e("p",R,p(t.value.averageTemperature!==null?t.value.averageTemperature+"°C":"N/A"),1)]),e("div",J,[d(r,{name:"mdi:weight-kilogram",class:"text-3xl mb-2"}),s[3]||(s[3]=e("p",{class:"text-sm font-medium"},"Biomasa Total",-1)),e("p",Q,p(t.value.totalBiomassKg!==null?t.value.totalBiomassKg+" kg":"N/A"),1)])])])):a.value?(o(),l("div",U," Cargando estadísticas... ")):i.value?(o(),l("div",W," Error al cargar estadísticas: "+p(i.value),1)):_("",!0)}}},Y=h(X,[["__scopeId","data-v-7af87f75"]]),Z={name:"AppSidebar",props:{isOpen:{type:Boolean,default:!0}},setup(){const n=v(),t=[{path:"/dashboard",title:"Dashboard",icon:"material-symbols:dashboard-outline-rounded"},{path:"/settings",title:"Ajustes",icon:"material-symbols:settings-outline-rounded"},{path:"/cameras",title:"Camaras",icon:"material-symbols:security"}];return{visibleMenuItems:C(()=>{const i=[...t];return n.isAdmin&&i.push({path:"/settings/control-panel",title:"Panel de Control",icon:"material-symbols:admin-panel-settings-outline-rounded"}),i})}}},ee={class:"h-full flex flex-col"},te={key:1,class:"text-xl font-bold ml-2"},se={class:"mt-4 flex-grow"},ne={class:"flex items-center justify-center w-8 h-8"},oe={key:0,class:"ml-3"};function ae(n,t,a,i,c,u){const s=x,r=O;return o(),l("aside",{class:b(["fixed top-16 left-0 bottom-0 bg-gray-800 text-white transition-none z-20",a.isOpen?"w-64":"w-16"]),style:{"transition-property":"width","transition-duration":"0ms"}},[e("div",ee,[e("div",{class:b(["p-4 flex items-center",a.isOpen?"justify-start":"justify-center"])},[a.isOpen?_("",!0):(o(),S(s,{key:0,name:"material-symbols:water- मछली",class:"h-8 w-8 text-blue-400"})),a.isOpen?(o(),l("span",te,"FishMonitor")):_("",!0)],2),e("nav",se,[e("ul",null,[(o(!0),l($,null,k(i.visibleMenuItems,m=>(o(),l("li",{key:m.path,class:"mb-1"},[d(r,{to:m.path,class:"flex items-center py-2 px-3 mx-2 rounded hover:bg-gray-700",title:m.title,"active-class":"bg-gray-600 font-semibold"},{default:A(()=>[e("span",ne,[d(s,{name:m.icon,class:"h-5 w-5"},null,8,["name"])]),a.isOpen?(o(),l("span",oe,p(m.title),1)):_("",!0)]),_:2},1032,["to","title"])]))),128))])])])],2)}const le=h(Z,[["render",ae]]),ie={name:"DefaultLayout",data(){return{isSidebarOpen:!0}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}}},re={class:"min-h-screen bg-gray-900 text-gray-200"};function de(n,t,a,i,c,u){const s=F,r=Y,m=le;return o(),l("div",re,[e("div",{style:g({marginLeft:c.isSidebarOpen?"16rem":"4rem"}),class:"fixed top-0 right-0 left-0 z-40 transition-all duration-300"},[d(s,{onToggleSidebar:u.toggleSidebar,"is-sidebar-open":c.isSidebarOpen},null,8,["onToggleSidebar","is-sidebar-open"])],4),e("div",{style:g({marginLeft:c.isSidebarOpen?"16rem":"4rem"}),class:"fixed top-16 right-0 left-0 z-30"},[d(r)],4),d(m,{"is-open":c.isSidebarOpen},null,8,["is-open"]),e("main",{class:"transition-all duration-300",style:g({paddingTop:"calc(4rem + 150px)",marginLeft:c.isSidebarOpen?"16rem":"4rem"})},[e("div",null,[T(n.$slots,"default")])],4)])}const me=h(ie,[["render",de]]);export{me as default};
